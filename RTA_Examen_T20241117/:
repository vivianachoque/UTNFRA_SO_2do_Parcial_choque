
#!/bin/bash

DISK1="/dev/sdc"    # 2 GB DISCO
DISK2="/dev/sdd"    # 1 GB DISCO

echo "Preparando discos por favor espere un momento"
sudo fdisk $DISK1 <<EOF
n
p



t
8E
w
EOF

sudo fdisk $DISK2 <<EOF
n
p



t
82
w
EOF

sudo pvcreate $DISK1 $DISK2

sudo vgcreate vg_datos $DISK1
sudo vgcreate vg_temp $DISK2

sudo lvcreate -L 5M -n lv_docker vg_datos
sudo lvcreate -L 1.5G -n lv_workareas vg_datos
sudo lvcreate -L 512M -n lv_swap vg_temp

sudo mkfs.ext4 /dev/vg_datos/lv_docker
sudo mkfs.ext4 /dev/vg_datos/lv_workareas
sudo mkswap /dev/vg_temp/lv_swap
#Ver si se puede hacer validaciones de esta linea
sudo mkdir -p /var/lib/docker
sudo mkdir -p /work

sudo mount /dev/vg_datos/lv_docker /var/lib/docker
sudo mount /dev/vg_datos/lv_workareas /work
sudo swapon /dev/vg_temp/lv_swap

echo "/dev/vg_datos/lv_docker /var/lib/docker ext4 defaults 0 0" | sudo tee -a /etc/fstab
echo "/dev/vg_datos/lv_workareas /work ext4 defaults 0 0" | sudo tee -a /etc/fstab
echo "/dev/vg_temp/lv_swap swap swap defaults 0 0" | sudo tee -a /etc/fstab

sudo systemctl restart docker
